<UserControl
    x:Class="Unison.UWPApp.UI.Views.LoginView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Unison.UWPApp.UI.Views"
    xmlns:controls="using:Unison.UWPApp.UI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="800"
    d:DesignWidth="1200">

    <Grid Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Top Green Section (Original Design) -->
        <Grid Background="{StaticResource UnisonGreenBrightBrush}" Height="175">
            <!-- Branding Logo -->
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,0,0,40">
                <Viewbox Width="180" Height="50">
                    <Canvas Width="694" Height="201">
                        <Path Fill="White" Data="M0,200.896L14.1284,149.311C5.4001,134.179 0.815293,117.013 0.836483,99.5436 0.859453,44.6544 45.528,0 100.419,0 127.056,0.0134258 152.058,10.3793 170.861,29.196 189.664,48.0125 200.01,73.0235 200,99.6236 199.976,154.509 155.3,199.171 100.417,199.171L100.374,199.171C83.7095,199.165,67.3343,194.984,52.789,187.053L0,200.896z"/>
                        <Path Fill="{StaticResource UnisonGreenBrightBrush}" Data="M158.965,41.0799C174.532,56.5739 183.254,77.6527 183.184,99.6165 183.167,145.239 146.038,182.358 100.418,182.358L100.387,182.358C85.5319,182.349,70.9649,178.362,58.2603,170.822L55.2352,169.03 23.9089,177.244 32.2718,146.714 30.3026,143.583C22.0137,130.394 17.627,115.128 17.6495,99.5501 17.6657,53.9305 54.7943,16.8157 100.45,16.8157 122.413,16.7636 143.483,25.5011 158.965,41.0799z"/>
                        <Path Fill="White" Data="M75.5292,57.9289C77.7408,62.85 82.5753,75.1551 83.1977,76.399 83.8204,77.6429 84.2332,79.099 83.4048,80.7569 82.5765,82.4149 82.1663,83.453 80.9198,84.9052 79.6733,86.3575 78.3025,88.148 77.1859,89.2633 75.9379,90.503 74.6386,91.851 76.0922,94.3399 77.5458,96.8289 82.5385,104.974 89.935,111.569 99.4414,120.045 107.454,122.674 109.944,123.917 112.434,125.161 113.884,124.953 115.336,123.292 116.789,121.632 121.551,116.03 123.212,113.54 124.872,111.049 126.53,111.462 128.811,112.293 131.092,113.124 143.323,119.143 145.813,120.388 148.303,121.633 149.962,122.252 150.583,123.292 151.205,124.333 151.203,129.311 149.131,135.121 147.059,140.931 136.902,146.536 132.338,146.95 127.774,147.364 123.497,149.013 102.48,140.724 77.1883,130.751 61.2179,104.829 59.9754,103.167 58.7329,101.505 49.8164,89.6762 49.8164,77.4344 49.8164,65.1927 56.2466,59.1742 58.5258,56.6839 60.805,54.1937 63.5011,53.5713 65.1604,53.5713L69.93,53.6293C71.7016,53.7011,73.6641,53.786,75.5292,57.9289z"/>
                        <Path Fill="White" Data="F1 M325.686,112.765C325.686,125.332 322.16,135.692 315.11,143.845 308.109,151.948 297.776,156 284.113,156 270.937,156 260.945,152.069 254.138,144.209 247.379,136.299 244,125.939 244,113.129L244,49.8767 261.358,49.8767 261.358,112.328C261.358,121.548 263.571,128.559 267.995,133.363 272.42,138.119 278.157,140.496 285.207,140.496 292.063,140.496 297.63,138.216 301.909,133.654 306.188,129.045 308.327,122.275 308.327,113.347L308.327,49.8767 325.686,49.8767 325.686,112.765z" />
                        <Path Fill="White" Data="F1 M413.498,154.253L396.577,154.253 396.577,110.654C396.577,104.491 395.337,99.8085 392.857,96.6059 390.378,93.3548 386.707,91.7292 381.844,91.7292 376.545,91.7292 372.217,93.6216 368.862,97.4066 365.556,101.191 363.903,105.971 363.903,111.746L363.903,154.253 346.909,154.253 346.909,79.7193 363.903,79.7193 363.903,89.8367 364.194,89.8367C366.82,86.0518 370.224,83.1403 374.405,81.1023 378.635,79.0157 383.206,77.9725 388.117,77.9725 396.383,77.9725 402.679,80.5928 407.006,85.8334 411.334,91.0741 413.498,98.5711 413.498,108.325L413.498,154.253z" />
                        <Path Fill="White" Data="F1 M441.212,66.1082C438.003,66.1082 435.378,65.0892 433.335,63.0511 431.342,60.9646 430.345,58.4656 430.345,55.5541 430.345,52.5941 431.342,50.0951 433.335,48.057 435.378,46.019 438.003,45 441.212,45 444.47,45 447.096,46.019 449.089,48.057 451.131,50.0951 452.152,52.5941 452.152,55.5541 452.152,58.5626 451.131,61.0859 449.089,63.1239 447.096,65.1134 444.47,66.1082 441.212,66.1082z M449.673,154.253L432.679,154.253 432.679,79.7193 449.673,79.7193 449.673,154.253z" />
                        <Path Fill="White" Data="F1 M465.645,141.952L476.147,133.145C478.773,136.784 481.618,139.356 484.681,140.86 487.744,142.365 491.196,143.117 495.037,143.117 498.781,143.117 501.796,142.292 504.081,140.642 506.366,138.992 507.509,136.614 507.509,133.509 507.509,131.18 506.464,129.166 504.373,127.468 502.331,125.769 499.073,124.508 494.6,123.683 484.972,121.887 478.263,119.097 474.47,115.312 470.726,111.527 468.854,106.82 468.854,101.191 468.854,94.2039 471.358,88.5993 476.366,84.3777 481.374,80.1075 487.744,77.9725 495.475,77.9725 500.872,77.9725 505.831,78.9187 510.353,80.8111 514.924,82.7036 518.546,85.6151 521.22,89.5456L510.864,98.0616C508.773,95.5869 506.488,93.7672 504.008,92.6026 501.528,91.3895 498.611,90.7829 495.256,90.7829 491.755,90.7829 488.984,91.5351 486.942,93.0393 484.948,94.5436 483.951,96.6544 483.951,99.3718 483.951,101.798 484.9,103.715 486.796,105.122 488.741,106.529 492.436,107.742 497.882,108.761 506.245,110.217 512.493,112.837 516.626,116.622 520.759,120.407 522.825,125.551 522.825,132.053 522.825,139.526 520.126,145.397 514.729,149.668 509.381,153.889 502.768,156 494.891,156 488.182,156 482.347,154.763 477.387,152.288 472.428,149.813 468.514,146.368 465.645,141.952z" />
                        <Path Fill="White" Data="F1 M572.493,156C560.677,156 551.293,152.53 544.34,145.591 537.387,138.652 533.911,129.311 533.911,117.569 533.959,105.68 537.655,96.1207 544.997,88.8905 552.339,81.6118 561.869,77.9725 573.587,77.9725 585.353,77.9725 594.64,81.539 601.447,88.6721 608.254,95.8052 611.658,105.025 611.658,116.331 611.658,127.88 608.06,137.391 600.864,144.864 593.716,152.288 584.259,156 572.493,156z M573.149,142.243C579.859,142.243 585.062,139.963 588.757,135.401 592.452,130.791 594.3,124.58 594.3,116.768 594.3,109.247 592.428,103.205 588.684,98.6439 584.989,94.0341 579.81,91.7292 573.149,91.7292 566.488,91.7292 561.164,94.1069 557.177,98.8623 553.19,103.569 551.196,109.683 551.196,117.205 551.196,125.017 553.165,131.155 557.104,135.62 561.042,140.035 566.391,142.243 573.149,142.243z" />
                        <Path Fill="White" Data="F1 M694,154.253L677.079,154.253 677.079,110.654C677.079,104.491 675.84,99.8085 673.36,96.6059 670.88,93.3548 667.209,91.7292 662.347,91.7292 657.047,91.7292 652.72,93.6216 649.365,97.4066 646.058,101.191 644.405,105.971 644.405,111.746L644.405,154.253 627.412,154.253 627.412,79.7193 644.405,79.7193 644.405,89.8367 644.697,89.8367C647.323,86.0518 650.726,83.1403 654.908,81.1023 659.138,79.0157 663.708,77.9725 668.619,77.9725 676.885,77.9725 683.182,80.5928 687.509,85.8334 691.836,91.0741 694,98.5711 694,108.325L694,154.253z" />
                    </Canvas>
                </Viewbox>
            </StackPanel>

            <!-- Bottom Swirls (Original Design) -->
            <Viewbox Stretch="Fill" VerticalAlignment="Bottom" Height="65" Margin="0,0,0,-1">
                <Canvas Width="123.62135" Height="21.41757">
                    <Canvas.RenderTransform>
                        <TranslateTransform X="-177.99172" Y="-266.48336"/>
                    </Canvas.RenderTransform>
                    <Path Fill="White" Opacity="0.25098" Data="F1 M182.09992,286.57287C182.09992,286.57287 185.57603,276.38524 217.54633,276.62025 241.13221,276.79363 248.31021,279.16699 258.81148,279.15308 265.8841,279.14371 286.04927,270.99632 294.60232,267.20666 298.10811,265.65334 301.22339,267.07563 301.56703,267.13872 301.58596,267.14219 301.61307,267.14924 301.61307,267.14924L301.61269,279.65169 298.35932,286.57285z"/>
                    <Path Fill="White" Opacity="0.25098" Data="F1 M178.02356,279.85576C178.02356,279.85576 179.97345,271.98314 196.44966,271.59585 213.65597,271.82415 240.54375,284.84871 240.54375,284.84871 240.54375,284.84871 204.08059,283.72394 193.18189,282.15266 187.25036,281.2975 178.02356,279.85577 178.02356,279.85577z"/>
                    <Path Fill="White" Data="F1 M177.99172,287.90093L177.99172,270.70502C177.99172,270.70502 187.46898,280.5197 216.60771,280.51054 231.72596,279.28679 242.87046,276.06722 250.67704,273.64616 253.44964,272.78629 258.381,270.50118 264.53351,270.48032 269.64538,270.48032 276.30807,272.63487 276.79035,272.74877 283.96299,274.44278 291.6432,276.70942 296.52108,278.04651 299.599,278.89021 301.60608,278.52922 301.60608,278.53151 301.60594,280.96376 301.60557,287.90094 301.60557,287.90094z"/>
                </Canvas>
            </Viewbox>
        </Grid>

        <!-- Content Area -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Padding="40,40" MaxWidth="800" HorizontalAlignment="Center">
                <controls:LoginInstructionHeader Width="300" HorizontalAlignment="Center" Margin="0,0,0,32"/>

                <StackPanel x:Name="LoginPanel" HorizontalAlignment="Center">
                    <StackPanel x:Name="QRPairingPanel">
                        <Grid x:Name="QRCodeContainer" Margin="0,0,0,32">
                            <Border x:Name="QRCodeBorder" Padding="12" Background="White" BorderThickness="1" BorderBrush="#EEEEEE" CornerRadius="4">
                                <Grid Width="264" Height="264">
                                    <Image x:Name="QRCodeImage" Width="264" Height="264" Stretch="Uniform"/>
                                    <controls:ModernProgressRing x:Name="QRProgress" Width="48" Height="48" HorizontalAlignment="Center" VerticalAlignment="Center" IsActive="True"/>
                                    <Grid x:Name="QRPlaceholder" Visibility="Collapsed"/>
                                </Grid>
                            </Border>
                            
                            <Button x:Name="ReloadQRButton" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                    Click="ReloadQRButton_Click" Visibility="Collapsed"
                                    Background="{StaticResource UnisonGreenBrush}" Foreground="White" Padding="16,8">
                                <StackPanel Orientation="Horizontal">
                                    <FontIcon Glyph="&#xE72C;" FontFamily="{StaticResource IconFont}" FontSize="16" Margin="0,0,8,0"/>
                                    <TextBlock Text="Reload QR Code"/>
                                </StackPanel>
                            </Button>
                        </Grid>

                        <TextBlock x:Name="QRStatusText" Text="Scan this code with your phone" 
                                   FontSize="15" HorizontalAlignment="Center" Opacity="0.5" 
                                   FontFamily="{StaticResource MainFont}"/>

                        <!-- Legacy elements required by code-behind -->
                        <StackPanel Visibility="Collapsed">
                            <TextBlock x:Name="StatusDetail"/>
                            <TextBlock x:Name="StatusText"/>
                            <Button x:Name="GenerateQRButton" Click="GenerateQRButton_Click"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- Bottom-anchored link -->
        <controls:LinkPhoneText x:Name="LinkWithPhoneBtn" Grid.Row="2" MaxWidth="210" Margin="0,20,0,40" HorizontalAlignment="Center" Tapped="LinkWithPhone_Tapped"/>
    </Grid>
</UserControl>
